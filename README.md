# 動画共有プラットフォーム（YouTube クローン）

<div align="center">

**Go + Next.js で構築する本格的な動画共有プラットフォーム**

フルスタック開発 | モダンな技術スタック | エンタープライズレベルのアーキテクチャ

[デモを見る](#クイックスタート) | [機能一覧](#主な機能) | [技術スタック](#技術スタック)

</div>

---

## 📝 概要

このプロジェクトは、YouTube のような本格的な動画共有プラットフォームを、**Go**と**Next.js**を用いてフルスクラッチで開発したものです。

### 🎯 プロジェクトの特徴

- **フルスタック開発**: フロントエンド、バックエンド、インフラまで一貫して設計・実装
- **モダンな技術スタック**: Go（Gin）、Next.js 14（App Router）、PostgreSQL、TypeScript を採用
- **RESTful API 設計**: スケーラブルで保守性の高い API 設計
- **本格的な機能実装**: 認証、動画管理、コメント、再生リスト、チャンネル登録など、主要機能を網羅
- **高品質な UI/UX**: Material-UI を用いたレスポンシブデザイン、スケルトンローディングによる快適な操作感
- **Docker 化**: 開発環境から本番環境まで一貫したコンテナ化

### 💡 開発背景

モダンな Web アプリケーション開発のベストプラクティスを学び、実践することを目的としています。
大規模なアプリケーションの設計・実装経験を通じて、以下のスキルを習得しました：

- バックエンド API 設計とセキュリティ（JWT 認証、ファイルアップロード）
- フロントエンドの状態管理とルーティング
- データベース設計とリレーション管理
- Docker によるコンテナオーケストレーション
- ファイルストレージ（Google Cloud Storage/MinIO）の統合
- クラウドデプロイ（Vercel、Heroku）の実装

---

## ✨ 主な機能

### 🔐 ユーザー認証

- ユーザー登録・ログイン・ログアウト
- JWT トークンベースの認証
- セキュアなパスワードハッシュ化（bcrypt）

### 🎬 動画機能

- 動画アップロード（MP4, WebM 対応）
- サムネイル画像のアップロード
- 動画の再生・視聴
- 視聴回数のカウント
- 動画の編集・削除（所有者のみ）
- 無限スクロール対応の動画一覧

### 💬 コメント機能

- 動画へのコメント投稿
- コメントへの返信（ネスト構造）
- コメントのいいね機能
- コメントの削除（所有者のみ）
- リアルタイムなコメント表示

### 📝 再生リスト

- 再生リスト作成・編集・削除
- 動画の追加・削除
- 公開設定（公開/限定公開/非公開）
- デフォルト再生リスト（「あとで見る」「高く評価した動画」）

### 👤 プロフィール・チャンネル

- チャンネル名・説明の設定
- アイコン・バナー画像のアップロード
- チャンネルページの表示
- 投稿動画の一覧表示

### 📊 チャンネル登録（サブスクリプション）

- チャンネルの登録・登録解除
- 登録者数の表示
- 登録チャンネルの一覧表示

### 📺 視聴履歴

- 視聴履歴の自動記録
- 視聴履歴の表示・削除

### 🎨 UI/UX

- Material-UI による洗練されたデザイン
- レスポンシブデザイン（PC、タブレット、スマートフォン対応）
- スケルトンローディング画面
- スムーズなページ遷移

---

## 🛠 技術スタック

### フロントエンド

| 技術                  | バージョン | 用途                                    |
| --------------------- | ---------- | --------------------------------------- |
| **Next.js**           | 14.2.1     | React フレームワーク（App Router 使用） |
| **React**             | 18         | UI ライブラリ                           |
| **TypeScript**        | 5          | 型安全な開発                            |
| **Material-UI (MUI)** | 7.3.4      | UI コンポーネントライブラリ             |
| **Emotion**           | 11         | CSS-in-JS スタイリング                  |
| **Tailwind CSS**      | 3.4        | ユーティリティファースト CSS            |

### バックエンド

| 技術           | バージョン | 用途                       |
| -------------- | ---------- | -------------------------- |
| **Go**         | 1.24       | プログラミング言語         |
| **Gin**        | 1.11       | Web フレームワーク         |
| **PostgreSQL** | 16         | リレーショナルデータベース |
| **pgx**        | 5.7        | PostgreSQL ドライバー      |
| **JWT**        | -          | 認証トークン               |
| **bcrypt**     | -          | パスワードハッシュ化       |

### ストレージ・インフラ

| 技術                     | 用途                                       |
| ------------------------ | ------------------------------------------ |
| **Google Cloud Storage** | 本番環境のクラウドストレージ（動画・画像） |
| **MinIO**                | 開発環境の S3 互換オブジェクトストレージ   |
| **Vercel**               | フロントエンドのホスティング・デプロイ     |
| **Heroku**               | バックエンドのホスティング・デプロイ       |
| **Docker**               | コンテナ化                                 |
| **Docker Compose**       | マルチコンテナ管理                         |
| **Air**                  | Go ホットリロード                          |

### 開発ツール

- **ESLint**: コード品質管理
- **Git**: バージョン管理

---

## 🎯 ユースケース

このプラットフォームは、以下のような用途で活用できます：

### 1. 動画クリエイター向けコンテンツ配信

- 独自の動画プラットフォームを構築し、クリエイターがコンテンツを配信
- コメント機能で視聴者とのコミュニケーション
- 再生リストで動画を整理

### 2. 教育コンテンツの共有

- オンライン講座や教育動画の配信
- 講義動画を再生リストで整理
- コメント機能で質疑応答

### 3. 企業内動画共有プラットフォーム

- 社内研修動画の配信
- 製品デモやプレゼンテーション動画の共有
- 非公開設定で社内限定公開

### 4. 個人の動画アーカイブ

- 思い出の動画を保存・管理
- 家族や友人と動画を共有
- プライベートな動画ライブラリの構築

---

## 🏗 システムアーキテクチャ

```
┌─────────────────────────────────────────────────────────────┐
│                         Client (Browser)                     │
│                   Next.js + React + TypeScript               │
└───────────────────────────┬─────────────────────────────────┘
                            │ HTTP/REST API
┌───────────────────────────┴─────────────────────────────────┐
│                      Backend (Go + Gin)                      │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐      │
│  │   Auth       │  │    Video     │  │   Comment    │      │
│  │   Handler    │  │   Handler    │  │   Handler    │      │
│  └──────────────┘  └──────────────┘  └──────────────┘      │
│  ┌──────────────────────────────────────────────────┐      │
│  │            JWT Middleware                        │      │
│  └──────────────────────────────────────────────────┘      │
└───────────────────┬───────────────────┬─────────────────────┘
                    │                   │
        ┌───────────┴─────────┐  ┌──────┴──────┐
        │   PostgreSQL        │  │   GCS/MinIO │
        │   (メタデータ)       │  │  (ファイル)  │
        └─────────────────────┘  └─────────────┘
```

### アーキテクチャの特徴

- **レイヤードアーキテクチャ**: Handler → Service → Repository の 3 層構造
- **RESTful API**: リソース指向の設計
- **JWT 認証**: ステートレスな認証方式
- **ファイルストレージ分離**: メタデータとファイルを分離して管理
- **クラウドストレージ**: 本番環境では Google Cloud Storage、開発環境では MinIO を使用
- **Docker 化**: 開発・本番環境の一貫性を保証

---

## 💾 データベース設計

### テーブル構成

| テーブル          | 説明             | 主要カラム                                  |
| ----------------- | ---------------- | ------------------------------------------- |
| **users**         | ユーザー情報     | id, email, password_hash                    |
| **profiles**      | プロフィール情報 | user_id, channel_name, icon_url, banner_url |
| **videos**        | 動画メタデータ   | id, user_id, title, video_url, view_count   |
| **comments**      | コメント         | id, video_id, user_id, parent_id, content   |
| **playlists**     | 再生リスト       | id, user_id, title, visibility              |
| **subscriptions** | チャンネル登録   | subscriber_id, subscribed_to_id             |
| **watch_history** | 視聴履歴         | user_id, video_id, watched_at               |

### ER 図

```
users (1) ─────< (*) videos
  │                    │
  │                    └─────< (*) comments
  │
  ├─────< (*) profiles
  │
  ├─────< (*) playlists
  │
  ├─────< (*) subscriptions (subscriber)
  │
  ├─────< (*) subscriptions (subscribed_to)
  │
  └─────< (*) watch_history
```

---

## 🚀 クイックスタート

### 前提条件

- **Docker** & **Docker Compose** がインストールされていること
- （オプション）Node.js 18+ / Go 1.22+ （ローカル開発時）

### 起動手順

1. **リポジトリのクローン**

```bash
git clone https://github.com/yourusername/video-platform.git
cd video-platform
```

2. **Docker Compose で起動**

```bash
docker-compose up -d
```

3. **サービスへのアクセス**

- **フロントエンド**: http://localhost:3000
- **バックエンド API**: http://localhost:8080
- **MinIO Console**: http://localhost:9001 (minioadmin / minioadmin)
- **PostgreSQL**: localhost:5432

4. **ログの確認**

```bash
docker-compose logs -f
```

5. **停止**

```bash
docker-compose down
```

### 初期ユーザー登録

1. http://localhost:3000 にアクセス
2. 「新規登録」からアカウントを作成
3. ログイン後、動画をアップロード

---

## 🔧 開発ガイド

### ローカル開発（Docker なし）

#### バックエンド

```bash
cd backend

# 環境変数の設定
cp .env.example .env

# PostgreSQL と MinIO を別途起動しておく必要があります

# 依存関係のインストール
go mod download

# 実行
go run cmd/api/main.go
```

#### フロントエンド

```bash
cd frontend

# 依存関係のインストール
npm install

# 開発サーバー起動
npm run dev
```

### API テスト

```bash
# ヘルスチェック
curl http://localhost:8080/health

# ユーザー登録
curl -X POST http://localhost:8080/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"password123"}'

# ログイン
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"password123"}'

# 動画一覧取得
curl http://localhost:8080/api/videos
```

詳細な API ドキュメントは [backend/README.md](backend/README.md) を参照してください。

---

## 📁 プロジェクト構成

```
.
├── backend/              # Go バックエンド
│   ├── cmd/
│   │   └── api/
│   │       └── main.go   # エントリーポイント
│   ├── internal/
│   │   ├── database/     # DB接続・マイグレーション
│   │   ├── handler/      # HTTPハンドラー
│   │   ├── middleware/   # ミドルウェア（認証など）
│   │   ├── model/        # データモデル
│   │   ├── repository/   # データアクセス層
│   │   └── service/      # ビジネスロジック
│   ├── Dockerfile
│   └── README.md
│
├── frontend/             # Next.js フロントエンド
│   ├── src/
│   │   ├── app/          # ページ（App Router）
│   │   ├── components/   # Reactコンポーネント
│   │   ├── contexts/     # React Context（認証など）
│   │   ├── lib/          # ユーティリティ・API
│   │   └── types/        # TypeScript型定義
│   ├── public/
│   └── package.json
│
├── docker-compose.yml    # Docker構成
└── README.md             # このファイル
```

---

## 🎓 学んだこと・技術的なポイント

### バックエンド

- **Go 言語**: 並行処理、型システム、エラーハンドリング
- **RESTful API 設計**: リソース指向、適切な HTTP メソッドとステータスコード
- **JWT 認証**: トークンベースの認証、ミドルウェアの実装
- **ファイルアップロード**: マルチパートフォームデータの処理
- **データベース設計**: 正規化、外部キー制約、インデックス
- **レイヤードアーキテクチャ**: 関心の分離、テスタビリティの向上

### フロントエンド

- **Next.js App Router**: サーバーコンポーネント、クライアントコンポーネントの使い分け
- **TypeScript**: 型安全な開発、インターフェース設計
- **状態管理**: React Context、useState と useEffect の適切な使用
- **Material-UI**: コンポーネントのカスタマイズ、テーマ設定
- **UX 最適化**: スケルトンローディング、無限スクロール、レスポンシブデザイン

### インフラ

- **Docker**: マルチステージビルド、コンテナオーケストレーション
- **Docker Compose**: サービス間の依存関係、ヘルスチェック
- **Google Cloud Storage**: 本番環境のクラウドストレージ統合、バケット管理
- **MinIO**: 開発環境の S3 互換ストレージ統合
- **Vercel**: フロントエンドの自動デプロイ、CDN 配信
- **Heroku**: バックエンドの自動デプロイ、スケーリング

---

## 📝 今後の改善予定

- [ ] 動画のトランスコーディング（複数解像度対応）
- [ ] 検索機能の実装（全文検索）
- [ ] リアルタイム通知機能
- [ ] おすすめ動画アルゴリズム
- [ ] ダークモード対応
- [ ] 多言語対応（i18n）
- [ ] E2E テストの追加
- [ ] CI/CD パイプラインの構築
- [ ] パフォーマンスモニタリング

---

## 📄 ライセンス

MIT License

---

## 👤 作成者

**[Your Name]**

- GitHub: [@yourusername](https://github.com/yourusername)
- Email: your.email@example.com

---

<div align="center">

**⭐ このプロジェクトが参考になったら、スターをお願いします！ ⭐**

</div>
